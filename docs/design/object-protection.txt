#
# Copyright (c) 2020 Seagate Technology LLC and/or its Affiliates
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# For any questions about this software or licensing,
# please email opensource@seagate.com or cortx-questions@seagate.com.
#

Full object protection

This feature is about calculating checksums for entire S3 objects.

- S3 PUT
  - MD5 checksum is calculated for each object. ETag from S3 client is checked
    against caclulated checksum and the PUT request fails if there is a
    mismatch. The checksum is saved during save_metadata.
- S3 multipart upload
  - MD5 checksum is calculated independently for each part and for each part
    ETag from client is checked against caclulated checksum (the same as for
    PUT).
  - S3AwsEtag class is used during CompleteMultipartUpload to calculate ETag
    for entire object.
- S3 GET
  - For an object that had been uploaded using S3 PUT ETag from the object
    metadata against MD5 checksum calculated during object I/O.
  - For an object that had been uploaded using multipart upload Etag is
    calculated in the same way as it was calculated in CompleteMultipartUpload.
  - If there is a mismatch between calculated Etag and Etag from the object
    metadata, then S3 server cancels HTTP request before returning the last
    portion of data to the client.  An IEM alert is also raised, to be
    consumed by other components (e.g. HA) as an indicator of an integrity
    issue.
